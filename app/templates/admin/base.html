<!doctype html>
<html lang="en" class="h-full bg-gray-100">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>
            {% block title %}Admin Dashboard{% endblock %} - {{ event_name }}
        </title>

        <!-- Tailwind CSS -->
        <script src="https://cdn.tailwindcss.com"></script>

        <!-- Alpine.js -->
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
        ></script>

        <!-- Heroicons (for icons) -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@heroicons/css@1.0.0/heroicons.min.css"
        />

        {% block extra_css %}{% endblock %}
    </head>
    <body class="h-full" x-data="{ sidebarOpen: false, mobileMenuOpen: false }">
        <div class="min-h-full">
            <!-- Mobile sidebar overlay -->
            <div
                x-show="sidebarOpen"
                x-transition:enter="transition-opacity ease-linear duration-300"
                x-transition:enter-start="opacity-0"
                x-transition:enter-end="opacity-100"
                x-transition:leave="transition-opacity ease-linear duration-300"
                x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"
                class="relative z-50 lg:hidden"
                role="dialog"
                aria-modal="true"
                style="display: none"
            >
                <div class="fixed inset-0 bg-gray-900/80"></div>
                <div class="fixed inset-0 flex">
                    <div
                        x-show="sidebarOpen"
                        x-transition:enter="transition ease-in-out duration-300 transform"
                        x-transition:enter-start="-translate-x-full"
                        x-transition:enter-end="translate-x-0"
                        x-transition:leave="transition ease-in-out duration-300 transform"
                        x-transition:leave-start="translate-x-0"
                        x-transition:leave-end="-translate-x-full"
                        class="relative mr-16 flex w-full max-w-xs flex-1"
                    >
                        <div
                            class="absolute left-full top-0 flex w-16 justify-center pt-5"
                        >
                            <button
                                type="button"
                                @click="sidebarOpen = false"
                                class="-m-2.5 p-2.5"
                            >
                                <span class="sr-only">Close sidebar</span>
                                <svg
                                    class="size-6 text-white"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M6 18 18 6M6 6l12 12"
                                    />
                                </svg>
                            </button>
                        </div>

                        <!-- Mobile Sidebar -->
                        {% include 'admin/partials/sidebar.html' %}
                    </div>
                </div>
            </div>

            <!-- Desktop sidebar -->
            <div
                class="hidden lg:fixed lg:inset-y-0 lg:z-50 lg:flex lg:w-72 lg:flex-col"
            >
                {% include 'admin/partials/sidebar.html' %}
            </div>

            <!-- Main content area -->
            <div class="lg:pl-72">
                <!-- Top navigation bar -->
                <div
                    class="sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8"
                >
                    <!-- Mobile menu button -->
                    <button
                        type="button"
                        @click="sidebarOpen = true"
                        class="-m-2.5 p-2.5 text-gray-700 lg:hidden"
                    >
                        <span class="sr-only">Open sidebar</span>
                        <svg
                            class="size-6"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                            />
                        </svg>
                    </button>

                    <!-- Separator -->
                    <div
                        class="h-6 w-px bg-gray-200 lg:hidden"
                        aria-hidden="true"
                    ></div>

                    <div class="flex flex-1 gap-x-4 self-stretch lg:gap-x-6">
                        <div class="relative flex flex-1">
                            <!-- Breadcrumbs -->
                            <div class="flex items-center">
                                {% block breadcrumbs %} {% include
                                'admin/partials/breadcrumbs.html' %} {% endblock
                                %}
                            </div>
                        </div>
                        <div class="flex items-center gap-x-4 lg:gap-x-6">
                            <!-- Notifications button -->
                            <button
                                type="button"
                                class="-m-2.5 p-2.5 text-gray-400 hover:text-gray-500"
                            >
                                <span class="sr-only">View notifications</span>
                                <svg
                                    class="size-6"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"
                                    />
                                </svg>
                            </button>

                            <!-- Separator -->
                            <div
                                class="hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"
                                aria-hidden="true"
                            ></div>

                            <!-- Profile dropdown -->
                            <div class="relative" x-data="{ open: false }">
                                <button
                                    type="button"
                                    @click="open = !open"
                                    class="-m-1.5 flex items-center p-1.5"
                                >
                                    <span class="sr-only">Open user menu</span>
                                    <div
                                        class="size-8 rounded-full bg-green-600 flex items-center justify-center text-white font-semibold"
                                    >
                                        {{ current_user.name[0].upper() if
                                        current_user.is_authenticated else 'A'
                                        }}
                                    </div>
                                    <span
                                        class="hidden lg:flex lg:items-center"
                                    >
                                        <span
                                            class="ml-4 text-sm/6 font-semibold text-gray-900"
                                            aria-hidden="true"
                                        >
                                            {{ current_user.name if
                                            current_user.is_authenticated else
                                            'Admin' }}
                                        </span>
                                        <svg
                                            class="ml-2 size-5 text-gray-400"
                                            viewBox="0 0 20 20"
                                            fill="currentColor"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                    </span>
                                </button>

                                <!-- Dropdown menu -->
                                <div
                                    x-show="open"
                                    @click.away="open = false"
                                    x-transition:enter="transition ease-out duration-100"
                                    x-transition:enter-start="transform opacity-0 scale-95"
                                    x-transition:enter-end="transform opacity-100 scale-100"
                                    x-transition:leave="transition ease-in duration-75"
                                    x-transition:leave-start="transform opacity-100 scale-100"
                                    x-transition:leave-end="transform opacity-0 scale-95"
                                    class="absolute right-0 z-10 mt-2.5 w-32 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none"
                                    style="display: none"
                                >
                                    <a
                                        href="{{ url_for('auth.change_password') }}"
                                        class="block px-3 py-1 text-sm/6 text-gray-900 hover:bg-gray-50"
                                        >Change Password</a
                                    >
                                    <a
                                        href="{{ url_for('auth.logout') }}"
                                        class="block px-3 py-1 text-sm/6 text-gray-900 hover:bg-gray-50"
                                        >Sign out</a
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main content -->
                <main class="py-10">
                    <div class="px-4 sm:px-6 lg:px-8">
                        <!-- Flash messages -->
                        {% with messages =
                        get_flashed_messages(with_categories=true) %} {% if
                        messages %}
                        <div class="mb-6 space-y-4">
                            {% for category, message in messages %}
                            <div
                                x-data="{ show: true }"
                                x-show="show"
                                x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 transform scale-90"
                                x-transition:enter-end="opacity-100 transform scale-100"
                                x-transition:leave="transition ease-in duration-200"
                                x-transition:leave-start="opacity-100 transform scale-100"
                                x-transition:leave-end="opacity-0 transform scale-90"
                                class="rounded-md {% if category == 'success' %}bg-green-50 border border-green-200{% elif category == 'error' %}bg-red-50 border border-red-200{% elif category == 'warning' %}bg-yellow-50 border border-yellow-200{% else %}bg-blue-50 border border-blue-200{% endif %} p-4"
                            >
                                <div class="flex">
                                    <div class="shrink-0">
                                        {% if category == 'success' %}
                                        <svg
                                            class="size-5 text-green-400"
                                            viewBox="0 0 20 20"
                                            fill="currentColor"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        {% elif category == 'error' %}
                                        <svg
                                            class="size-5 text-red-400"
                                            viewBox="0 0 20 20"
                                            fill="currentColor"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        {% elif category == 'warning' %}
                                        <svg
                                            class="size-5 text-yellow-400"
                                            viewBox="0 0 20 20"
                                            fill="currentColor"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        {% else %}
                                        <svg
                                            class="size-5 text-blue-400"
                                            viewBox="0 0 20 20"
                                            fill="currentColor"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        {% endif %}
                                    </div>
                                    <div class="ml-3 flex-1">
                                        <p
                                            class="text-sm {% if category == 'success' %}text-green-800{% elif category == 'error' %}text-red-800{% elif category == 'warning' %}text-yellow-800{% else %}text-blue-800{% endif %}"
                                        >
                                            {{ message }}
                                        </p>
                                    </div>
                                    <div class="ml-auto pl-3">
                                        <button
                                            @click="show = false"
                                            class="-mx-1.5 -my-1.5 inline-flex rounded-md p-1.5 {% if category == 'success' %}text-green-500 hover:bg-green-100{% elif category == 'error' %}text-red-500 hover:bg-red-100{% elif category == 'warning' %}text-yellow-500 hover:bg-yellow-100{% else %}text-blue-500 hover:bg-blue-100{% endif %}"
                                        >
                                            <span class="sr-only">Dismiss</span>
                                            <svg
                                                class="size-5"
                                                viewBox="0 0 20 20"
                                                fill="currentColor"
                                            >
                                                <path
                                                    d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"
                                                />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %} {% endwith %}

                        <!-- Page content -->
                        {% block content %}{% endblock %}
                    </div>
                </main>
            </div>
        </div>

        {% block extra_js %}{% endblock %}
    </body>
</html>
