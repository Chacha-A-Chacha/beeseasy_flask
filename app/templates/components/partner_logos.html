{% set logo_style = style|default('fixed-height') %}

<!-- Style 1: Fixed Height (Recommended for most cases) -->
{% if logo_style == 'fixed-height' %}
<div class="partner-logos-fixed-height">
    <div class="logo-grid">
        {% if partners %} {% for partner in partners %}
        <div class="logo-item">
            <img
                src="{{ partner.logo_url if partner.logo_url else 'https://via.placeholder.com/200x80?text=' + partner.name }}"
                alt="{{ partner.name }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% else %}
        <!-- Placeholder logos for demo -->
        {% for i in range(1, 11) %}
        <div class="logo-item">
            <img
                src="https://via.placeholder.com/{{ [200, 150, 180, 220, 160][loop.index0 % 5] }}x80?text=Partner+{{ i }}"
                alt="Partner {{ i }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% endif %}
    </div>
</div>

<style>
    .partner-logos-fixed-height {
        width: 100%;
        padding: 2rem 0;
    }

    .partner-logos-fixed-height .logo-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 2rem 3rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .partner-logos-fixed-height .logo-item {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 60px; /* Fixed height */
        min-width: 100px;
        max-width: 200px;
    }

    .partner-logos-fixed-height .logo-item img {
        max-height: 100%;
        max-width: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
        opacity: 0.9;
        transition: all 0.3s ease;
    }

    .partner-logos-fixed-height .logo-item img:hover {
        opacity: 1;
        transform: scale(1.05);
    }

    @media (max-width: 640px) {
        .partner-logos-fixed-height .logo-grid {
            gap: 1.5rem 2rem;
        }

        .partner-logos-fixed-height .logo-item {
            height: 50px;
            min-width: 80px;
            max-width: 150px;
        }
    }
</style>

<!-- Style 2: Fixed Width Boxes (Good for very different aspect ratios) -->
{% elif logo_style == 'fixed-width' %}
<div class="partner-logos-fixed-width">
    <div class="logo-grid">
        {% if partners %} {% for partner in partners %}
        <div class="logo-item">
            <img
                src="{{ partner.logo_url if partner.logo_url else 'https://via.placeholder.com/200x80?text=' + partner.name }}"
                alt="{{ partner.name }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% else %} {% for i in range(1, 11) %}
        <div class="logo-item">
            <img
                src="https://via.placeholder.com/200x{{ [80, 120, 100, 90, 110][loop.index0 % 5] }}?text=Partner+{{ i }}"
                alt="Partner {{ i }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% endif %}
    </div>
</div>

<style>
    .partner-logos-fixed-width {
        width: 100%;
        padding: 2rem 0;
    }

    .partner-logos-fixed-width .logo-grid {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .partner-logos-fixed-width .logo-item {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 180px; /* Fixed width */
        min-height: 60px;
        max-height: 120px;
    }

    .partner-logos-fixed-width .logo-item img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
        filter: grayscale(100%);
        opacity: 0.7;
        transition: all 0.3s ease;
    }

    .partner-logos-fixed-width .logo-item img:hover {
        filter: grayscale(0%);
        opacity: 1;
        transform: scale(1.05);
    }

    @media (max-width: 640px) {
        .partner-logos-fixed-width .logo-item {
            width: 140px;
        }
    }
</style>

<!-- Style 3: Contained Boxes (Best for uniform appearance) -->
{% elif logo_style == 'contained' %}
<div class="partner-logos-contained">
    <div class="logo-grid">
        {% if partners %} {% for partner in partners %}
        <div class="logo-box">
            <div class="logo-wrapper">
                <img
                    src="{{ partner.logo_url if partner.logo_url else 'https://via.placeholder.com/200x80?text=' + partner.name }}"
                    alt="{{ partner.name }}"
                    loading="lazy"
                />
            </div>
        </div>
        {% endfor %} {% else %} {% for i in range(1, 11) %}
        <div class="logo-box">
            <div class="logo-wrapper">
                <img
                    src="https://via.placeholder.com/{{ [200, 150, 180, 220, 160][loop.index0 % 5] }}x{{ [80, 120, 100, 90, 110][loop.index0 % 5] }}?text=Partner+{{ i }}"
                    alt="Partner {{ i }}"
                    loading="lazy"
                />
            </div>
        </div>
        {% endfor %} {% endif %}
    </div>
</div>

<style>
    .partner-logos-contained {
        width: 100%;
        padding: 2rem 0;
    }

    .partner-logos-contained .logo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 1.5rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .partner-logos-contained .logo-box {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 120px;
        transition: all 0.3s ease;
    }

    .partner-logos-contained .logo-box:hover {
        border-color: #ffc107;
        box-shadow: 0 4px 12px rgba(255, 193, 7, 0.1);
        transform: translateY(-2px);
    }

    .partner-logos-contained .logo-wrapper {
        width: 100%;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .partner-logos-contained .logo-wrapper img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
        filter: grayscale(100%);
        opacity: 0.7;
        transition: all 0.3s ease;
    }

    .partner-logos-contained .logo-box:hover .logo-wrapper img {
        filter: grayscale(0%);
        opacity: 1;
    }

    @media (max-width: 640px) {
        .partner-logos-contained .logo-grid {
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .partner-logos-contained .logo-box {
            min-height: 100px;
            padding: 1rem;
        }

        .partner-logos-contained .logo-wrapper {
            height: 60px;
        }
    }
</style>

<!-- Style 4: Flexible Grid with Object-fit (Modern approach) -->
{% elif logo_style == 'flexible' %}
<div class="partner-logos-flexible">
    <div class="logo-grid">
        {% if partners %} {% for partner in partners %}
        <a
            href="{{ partner.website if partner.website else '#' }}"
            class="logo-card"
            target="_blank"
            rel="noopener noreferrer"
            title="{{ partner.name }}"
        >
            <img
                src="{{ partner.logo_url if partner.logo_url else 'https://via.placeholder.com/200x80?text=' + partner.name }}"
                alt="{{ partner.name }}"
                loading="lazy"
            />
        </a>
        {% endfor %} {% else %} {% for i in range(1, 11) %}
        <div class="logo-card">
            <img
                src="https://via.placeholder.com/{{ [200, 150, 180, 220, 160][loop.index0 % 5] }}x{{ [80, 120, 100, 90, 110][loop.index0 % 5] }}?text=Partner+{{ i }}"
                alt="Partner {{ i }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% endif %}
    </div>
</div>

<style>
    .partner-logos-flexible {
        width: 100%;
        padding: 2rem 0;
    }

    .partner-logos-flexible .logo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
        align-items: center;
    }

    .partner-logos-flexible .logo-card {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        aspect-ratio: 2 / 1;
        background: #ffffff;
        border-radius: 8px;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .partner-logos-flexible .logo-card:hover {
        background: #f9fafb;
        transform: translateY(-4px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
    }

    .partner-logos-flexible .logo-card img {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
        filter: grayscale(100%);
        opacity: 0.75;
        transition: all 0.3s ease;
    }

    .partner-logos-flexible .logo-card:hover img {
        filter: grayscale(0%);
        opacity: 1;
    }

    @media (max-width: 768px) {
        .partner-logos-flexible .logo-grid {
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1.5rem;
        }
    }

    @media (max-width: 480px) {
        .partner-logos-flexible .logo-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }
    }
</style>

<!-- Style 5: Masonry-style (Pinterest-like) -->
{% elif logo_style == 'masonry' %}
<div class="partner-logos-masonry">
    <div class="logo-grid">
        {% if partners %} {% for partner in partners %}
        <div class="logo-item">
            <img
                src="{{ partner.logo_url if partner.logo_url else 'https://via.placeholder.com/200x80?text=' + partner.name }}"
                alt="{{ partner.name }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% else %} {% for i in range(1, 11) %}
        <div class="logo-item">
            <img
                src="https://via.placeholder.com/{{ [200, 150, 180, 220, 160][loop.index0 % 5] }}x{{ [80, 120, 100, 90, 110][loop.index0 % 5] }}?text=Partner+{{ i }}"
                alt="Partner {{ i }}"
                loading="lazy"
            />
        </div>
        {% endfor %} {% endif %}
    </div>
</div>

<style>
    .partner-logos-masonry {
        width: 100%;
        padding: 2rem 0;
    }

    .partner-logos-masonry .logo-grid {
        column-count: 5;
        column-gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .partner-logos-masonry .logo-item {
        break-inside: avoid;
        margin-bottom: 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #ffffff;
        padding: 1.5rem;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
        transition: all 0.3s ease;
    }

    .partner-logos-masonry .logo-item:hover {
        border-color: #ffc107;
        box-shadow: 0 4px 12px rgba(255, 193, 7, 0.1);
    }

    .partner-logos-masonry .logo-item img {
        max-width: 100%;
        height: auto;
        object-fit: contain;
        filter: grayscale(100%);
        opacity: 0.7;
        transition: all 0.3s ease;
    }

    .partner-logos-masonry .logo-item:hover img {
        filter: grayscale(0%);
        opacity: 1;
    }

    @media (max-width: 1024px) {
        .partner-logos-masonry .logo-grid {
            column-count: 4;
        }
    }

    @media (max-width: 768px) {
        .partner-logos-masonry .logo-grid {
            column-count: 3;
            column-gap: 1.5rem;
        }
    }

    @media (max-width: 640px) {
        .partner-logos-masonry .logo-grid {
            column-count: 2;
            column-gap: 1rem;
        }
    }
</style>

{% endif %}
