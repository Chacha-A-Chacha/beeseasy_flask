{% extends "base.html" %} {% block title %}Registration Opening Soon - {{
event_name }}{% endblock %} {% block content %}
<div class="relative isolate overflow-hidden bg-white">
    <!-- Hero Section -->
    <div class="relative py-24 sm:py-32">
        <img
            src="{{ url_for('static', filename='images/speakers/pattern.svg') }}"
            alt=""
            class="absolute inset-0 -z-10 h-full w-full object-cover opacity-5"
        />
        <div
            class="absolute inset-0 -z-10 bg-gradient-to-b from-primary-medium/10 to-white"
        ></div>

        <div class="mx-auto max-w-7xl px-6 lg:px-8">
            <div class="mx-auto max-w-2xl text-center">
                <!-- Icon -->
                <div
                    class="mx-auto flex items-center justify-center w-24 h-24 bg-accent-yellow/10 rounded-full mb-8"
                >
                    <svg
                        class="h-12 w-12 text-accent-orange"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="2"
                        stroke="currentColor"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"
                        />
                    </svg>
                </div>

                <!-- Heading -->
                <h1
                    class="text-4xl font-bold tracking-tight text-primary-dark sm:text-6xl mb-6"
                >
                    Registration Opening Soon!
                </h1>

                <!-- Message -->
                <p class="text-xl text-gray-600 mb-4">
                    We're finalizing the details for {{ event_name }}.
                </p>
                <p class="text-lg text-gray-600 mb-8">
                    {% if registration_type == "attendee" %} Delegate
                    registration will open shortly. Be among the first to secure
                    your spot at Africa's premier pollinator conservation
                    summit. {% elif registration_type == "exhibitor" %}
                    Exhibitor registration will open shortly. Reserve your space
                    to showcase your work at Africa's premier pollinator
                    conservation summit. {% else %} Registration will open
                    shortly. {% endif %}
                </p>

                <!-- Event Details Box -->
                <div
                    class="bg-primary-medium/10 border-2 border-primary-medium/30 rounded-2xl p-8 mb-12 text-left"
                >
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                        <div>
                            <p
                                class="text-sm font-semibold text-accent-orange uppercase tracking-wide mb-2"
                            >
                                Event Date
                            </p>
                            <p class="text-lg font-bold text-primary-dark">
                                {{ event_date }}
                            </p>
                        </div>
                        <div>
                            <p
                                class="text-sm font-semibold text-accent-orange uppercase tracking-wide mb-2"
                            >
                                Location
                            </p>
                            <p class="text-lg font-bold text-primary-dark">
                                {{ event_location }}
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Newsletter Signup -->
                <div
                    class="bg-white border-2 border-accent-yellow rounded-2xl p-8 mb-8"
                >
                    <h3 class="text-2xl font-bold text-primary-dark mb-4">
                        Be the First to Know
                    </h3>
                    <p class="text-gray-600 mb-6">
                        Get notified when registration opens and receive
                        exclusive updates about {{ event_short_name }}.
                    </p>

                    <form
                        id="closedNewsletterForm"
                        class="flex flex-col sm:flex-row gap-3"
                    >
                        <input
                            type="email"
                            id="closedEmail"
                            name="email"
                            placeholder="Enter your email"
                            required
                            class="flex-1 rounded-full border-0 bg-white px-4 py-3 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-accent-orange text-base"
                        />
                        <button
                            type="submit"
                            id="closedSubmitBtn"
                            class="rounded-full bg-accent-orange px-8 py-3 text-base font-semibold text-white shadow-lg hover:bg-accent-yellow hover:text-primary-dark transition-all duration-300"
                        >
                            Notify Me
                        </button>
                    </form>
                    <p
                        id="closedFormMessage"
                        class="mt-3 text-sm text-center hidden"
                    ></p>
                </div>

                <!-- Back Button -->
                <div class="flex justify-center">
                    <a
                        href="{{ url_for('main.index') }}"
                        class="inline-flex items-center text-primary-dark hover:text-accent-orange transition-colors font-semibold"
                    >
                        <svg
                            class="w-5 h-5 mr-2"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="2"
                            stroke="currentColor"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
                            />
                        </svg>
                        Back to Home
                    </a>
                </div>

                <!-- Social Proof -->
                <div class="mt-12 pt-8 border-t border-gray-200">
                    <p class="text-sm text-gray-500">
                        Join
                        <span class="font-bold text-primary-dark">500+</span>
                        participants from across Africa
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Get CSRF token from meta tag
    function getCSRFToken() {
        return document
            .querySelector('meta[name="csrf-token"]')
            ?.getAttribute("content");
    }

    // Show message
    function showClosedMessage(message, isError = false) {
        const messageEl = document.getElementById("closedFormMessage");
        messageEl.textContent = message;
        messageEl.className = `mt-3 text-sm text-center ${isError ? "text-red-600" : "text-green-600"}`;
        messageEl.classList.remove("hidden");
    }

    // Handle newsletter form submission
    document.addEventListener("DOMContentLoaded", function () {
        const closedForm = document.getElementById("closedNewsletterForm");
        if (closedForm) {
            closedForm.addEventListener("submit", async function (e) {
                e.preventDefault();

                const emailInput = document.getElementById("closedEmail");
                const submitBtn = document.getElementById("closedSubmitBtn");
                const messageEl = document.getElementById("closedFormMessage");

                const email = emailInput.value.trim();

                if (!email) {
                    showClosedMessage("Please enter your email address", true);
                    return;
                }

                // Disable form
                submitBtn.disabled = true;
                submitBtn.textContent = "Subscribing...";
                messageEl.classList.add("hidden");

                try {
                    const response = await fetch("/newsletter/subscribe", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "X-CSRFToken": getCSRFToken(),
                        },
                        body: JSON.stringify({
                            email: email,
                            source: "registration_closed",
                        }),
                    });

                    const data = await response.json();

                    if (data.success) {
                        showClosedMessage(data.message, false);
                        emailInput.value = "";
                    } else {
                        showClosedMessage(data.message, true);
                    }
                } catch (error) {
                    showClosedMessage(
                        "An error occurred. Please try again.",
                        true,
                    );
                } finally {
                    submitBtn.disabled = false;
                    submitBtn.textContent = "Notify Me";
                }
            });
        }
    });
</script>
{% endblock %}
